input RegisterCompetitorInput {
    first_name: String!
    last_name: String!
    email: Email!
    guests: [String!]!
    is_interested_in_nations_cup: Boolean!
    events: [ID!]
    days: [ID!]
}

input CreateCompetitorInput {
    first_name: String!
    last_name: String!
    email: Email!
    wca_id: WcaId!
    nationality: String!
    gender: String!
    registration_status: RegistrationStatus
    payment_status: PaymentStatus
    event_ids: [ID!]
    day_ids: [ID!]
}

type RegistrationReceipt {
    id: ID!
    first_name: String!
    last_name: String!
    wca_id: WcaId!
    email: Email!
}

type Competitor {
    id: ID!
    first_name: String!
    last_name: String!
    wca_id: WcaId!
    email: Email! @guard @can(ability: "manage", model: "Competitor", query: true)
    registration_status: RegistrationStatus!
    payment_status: PaymentStatus! @guard @can(ability: "manage", model: "Competitor", query: true)
    has_podium_potential: Boolean!
    events: [Event!]! @belongsToMany
    days: [Day!]! @belongsToMany @guard @can(ability: "manage", model: "Competitor", query: true)
    nationality: String!
    is_eligible_for_prizes: Boolean!
    finances: FinancialBook! @guard @can(ability: "manage", model: "Competitor", query: true)
    created_at: DateTime!
    updated_at: DateTime
}

extend type Query {
    competitors(events: [ID!], days: [ID!], is_eligible_for_prizes: Boolean @eq): [Competitor!]! @paginate
    competitor(id: ID!): Competitor @find
}

extend type Mutation {
    registerCompetitor(input: RegisterCompetitorInput @spread): RegistrationReceipt
        @guard
    createCompetitor(input: CreateCompetitorInput @spread): Competitor
        @create
        @guard
        @can(ability: "crud")
    updateCompetitor(input: CreateCompetitorInput @spread): Competitor
        @update
        @guard
        @can(ability: "crud")
    deleteCompetitor(id: ID!): Competitor
        @delete
        @guard
        @can(ability: "crud")
}

